(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{108:function(e,t,a){},124:function(e,t,a){},147:function(e,t,a){e.exports=a(302)},152:function(e,t,a){},228:function(e,t,a){},236:function(e,t,a){},301:function(e,t,a){},302:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(7),i=a.n(c),o=a(71),s=(a(152),a(16)),l=a(17),m=a(20),u=a(18),d=a(21),h=(a(153),a(106)),f=a(44),p=a(34),E="http://13.233.91.157:8080",v=(a(108),function(e){var t=e.shortName,a=e.name,n=e.empId,c=e.mobile,i=e.subject,o=e.color,s=e.onClickEnabled,l=e.onBoxClicked,m=e.FullWidth,u=void 0!==m&&m;return r.a.createElement("div",{className:"teacherBox",onClick:s?l:null,style:{maxWidth:u?"100%":"400px"}},r.a.createElement("div",{align:"center",className:"shortName",style:{background:o}},t?t.slice(0,3).toUpperCase():""),r.a.createElement("div",{className:"teacherDtls"},r.a.createElement("div",{className:"teacherName"},a),n?r.a.createElement("div",{className:"title"},"EMP ID ",r.a.createElement("span",{className:"empId"},n)):"",i?r.a.createElement("div",{className:"title"},r.a.createElement("span",{className:"empId"},i)):"",r.a.createElement("div",{className:"title"},c)))}),g=(a(109),a(10)),b=(a(78),a(59)),y=(a(158),a(133)),N=function(e){var t=e.name,a=e.email;return r.a.createElement("div",{style:{display:"flex",alignItems:"center"}},r.a.createElement(y.a,{size:"large",icon:"user"}),r.a.createElement("div",{style:{color:"#171d35",float:"right",padding:"8px 16px"}},r.a.createElement("div",{style:{fontSize:"16px",color:"#171d35"}},t),r.a.createElement("div",{style:{fontSize:"12px",color:"rgba(23, 29, 53, 0.6)"}},a)))},j=(a(124),function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={searchKey:""},a.onHeaderClick=function(){window.location.replace("/teachers")},a.handleOnChange=function(e){var t=e.target.value;a.setState({searchKey:t}),a.props.searchInputChange(t)},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{style:{height:"80px"}},r.a.createElement("div",{className:"mainHeader"},r.a.createElement("div",{className:"title",onClick:function(){return e.onHeaderClick()}},"AS",r.a.createElement("span",{className:"pink"},"SIGN"),"MENT"),r.a.createElement("div",{className:"searchBox"},r.a.createElement(b.a,{className:"searchInput",placeholder:"Search Teachers",onChange:this.handleOnChange}),r.a.createElement(g.a,{type:"search",className:"searchIcon"})),r.a.createElement("div",{className:"profile"},r.a.createElement(N,{name:"Nikhil T Nair",email:"nikhil@test.com"}))))}}]),t}(n.Component)),C=["#ffd7d7","#ebd7ff","#d7ffeb","#fff8d7","#ffe8d7","#e3ffd7","#d7dbff","#ffd7f2"],k="".concat(E,"/api/v0"),O=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={teacherList:[]},a.onTeacherBoxClicked=function(e){a.props.history.push("/teachers/".concat(e))},a.handleInputChange=function(e){fetch("".concat(k,"/teachers?&first_name__contains=").concat(e)).then(function(e){return e.json()}).then(function(e){a.setState({teacherList:e.results})})},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("".concat(k,"/teachers/")).then(function(e){return e.json()}).then(function(t){e.setState({teacherList:t.results})})}},{key:"render",value:function(){var e=this,t=this.state.teacherList;return r.a.createElement("div",null,r.a.createElement(j,{searchInputChange:this.handleInputChange}),r.a.createElement("div",{className:"teacherMain"},r.a.createElement("h1",{className:"mainTitle"},"Choose the Teacher"),r.a.createElement(p.Spring,{from:{opacity:0,marginTop:1e3},to:{opacity:1,marginTop:0},config:{duration:1e3,delay:1e3}},function(a){return r.a.createElement("div",{className:"listContainer",style:a},t.map(function(t,a){var n=t.full_name,c=t.id,i=t.code,o=C[a%8];return r.a.createElement("div",{className:"listInnerContainer",key:a},r.a.createElement(v,{name:n,code:i,mobile:"NA",shortName:i,color:o,onClickEnabled:!0,onBoxClicked:function(){return e.onTeacherBoxClicked(c)}}))}))})))}}]),t}(n.Component),x=function(e){function t(){return Object(s.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,"About Page")}}]),t}(n.Component),w=function(e){function t(){return Object(s.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,"User page")}}]),t}(n.Component),T=(a(79),a(32)),S=(a(303),a(145)),I=(a(127),a(33)),_=a(136),D=a.n(_),A=a(137),L=a.n(A),M=a(9),P=a.n(M),B=a(104),F=a.n(B),H=function(e){return Object.keys(e).map(function(t){return t+"="+e[t]}).join("&")},Y=(a(228),Array.from(new Array(7),function(e,t){return t+1})),W="".concat(E,"/api/v0"),z=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={showSidebar:!1,teacherHours:[],selectedDate:"",teacherInfo:{},alternateList:[],freePeriodId:"",subjectTeacherId:"",insight:{},selectedIndex:"",selectedFlag:!1,insightTeacher:{},showAlternateList:!1},a.getHoursOfTeacher=function(e){var t=a.props.match.params.teacherId,n=H({date:e,teacher:t});fetch("".concat(W,"/periods/?").concat(n)).then(function(e){return e.json()}).then(function(e){0===e.results.length?(I.a.error("No Time Table found for this date. Try different date",5),a.setState({teacherHours:[]})):a.setState({teacherHours:e.results})})},a.selectDatePicker=function(e){var t=P()(e).format("YYYY-MM-DD");a.getHoursOfTeacher(t),a.setState({selectedDate:t}),a.props.history.push({search:"date=".concat(t)})},a.onBoxClicked=function(e){var t=a.state,n=t.freePeriodId,r=t.selectedDate,c=e.id;fetch("".concat(W,"/periods/").concat(n,"/insights/?subject_teacher_id=").concat(c,"&date=").concat(r)).then(function(e){return e.json()}).then(function(t){a.setState({showSidebar:!0,subjectTeacherId:c,insight:t,insightTeacher:e})}).catch(function(){return I.a.error("Someting went wrong. Please try again")})},a.getAlternateTeachers=function(e,t){var n=a.state,r=n.selectedFlag,c=n.selectedIndex,i=n.selectedDate;c!==t?fetch("".concat(W,"/periods/").concat(e,"/free-teachers/?date=").concat(i)).then(function(e){return e.json()}).then(function(n){n&&n.results&&n.results.length>0?a.setState({alternateList:n.results,freePeriodId:e,selectedIndex:t,selectedFlag:!0}):I.a.error("No Free teacher found!!")}).catch(function(e){return console.log("err is ",e)}):a.setState({selectedFlag:!r})},a.assignAlternateTeacher=function(){var e=a.state,t=e.freePeriodId,n=e.selectedDate,r=e.subjectTeacherId;fetch("".concat(W,"/period-adjustments/"),{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({adjusted_date:n,period:t,adjusted_by:r})}).then(function(e){return e.json()}).then(function(e){e&&e.non_field_errors&&e.non_field_errors.length>0?I.a.error(e.non_field_errors[0]):(I.a.success("Period adjustment completed Successfully"),a.setState({showSidebar:!1},function(){window.location.reload()}))}).catch(function(e){console.log("err is ",e),I.a.error("Someting went wrong. Please try again")})},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.location.search,a=F.a.parse(t)&&F.a.parse(t).date,n=a||P()(new Date).format("YYYY-MM-DD");fetch("".concat(W,"/teachers/?id=").concat(this.props.match.params.teacherId)).then(function(e){return e.json()}).then(function(t){e.setState({teacherInfo:t.results[0]||{},selectedDate:n})}),this.getHoursOfTeacher(n)}},{key:"render",value:function(){var e=this,t=this.state,a=t.showSidebar,n=t.teacherHours,c=t.teacherInfo,i=t.alternateList,o=t.insight,s=o.had_class_in_previous_period,l=o.have_class_in_next_period,m=o.periods_in_the_same_class,u=o.total_periods_allotted,d=t.selectedFlag,h=t.selectedIndex,f=t.insightTeacher,E=t.selectedDate,b=c.full_name,y=c.code,N=c.mobile,C=L()(f,"teacher",{});return r.a.createElement("div",null,r.a.createElement(j,null),r.a.createElement("div",{className:"detailsContainer"},r.a.createElement("div",{className:"backContainer"},r.a.createElement(g.a,{type:"arrow-left",className:"leftArrow",onClick:function(){return e.props.history.push("/teachers")}}),r.a.createElement("div",{className:"subTitle"},"Time Table")),r.a.createElement(p.Spring,{from:{opacity:0,marginRight:-500},to:{opacity:1,marginRight:0}},function(e){return r.a.createElement("div",{className:"teacherDetails",style:e},r.a.createElement(v,{name:b,mobile:N||"NA",shortName:y,color:"#ffd7d7",onClickEnabled:!1,FullWidth:!0}))}),r.a.createElement(p.Spring,{from:{opacity:0,marginTop:1e3},to:{opacity:1,marginTop:0}},function(t){return r.a.createElement("div",{className:"ttDetails",style:t},r.a.createElement("div",{className:"ttTitle"},r.a.createElement("div",{style:{padding:"20px 25px",fontSize:"16px",fontWeight:"500",color:"#171d35"}},"TIME TABLE"),r.a.createElement("div",{style:{padding:"10px 20px"}},r.a.createElement(S.a,{onChange:e.selectDatePicker,defaultValue:P()(new Date,"YYYY-MM-DD"),value:P()(E)}))),r.a.createElement("div",{className:"ttSubtitle"},Y.map(function(t,a){var c=D.a.filter(n,{period_number:t}),i=c[0]||{},o=i.classroom,s=(o=void 0===o?{}:o).standard,l=o.division,m=i.subject_teacher,u=(m=void 0===m?{}:m).subject,f=i.id;return r.a.createElement("div",{key:t,style:{textAlign:"center"}},r.a.createElement("div",{style:{background:"#f9f9f9",padding:"10px"}},"0".concat(t)),r.a.createElement("div",{className:"ttDetailsMain ".concat(h===a&&d?"selected":"")},0===c.length?r.a.createElement("div",{className:"mainEmptyBox"}):r.a.createElement("div",{className:"mainBox",onClick:function(){return e.getAlternateTeachers(f,a)}},r.a.createElement("div",{className:"classBox"},"".concat(s).concat(l)),r.a.createElement("div",{className:"subjectBox"},u.name))))})))}),r.a.createElement(p.Transition,{native:!0,items:i.length>0,from:{opacity:0,marginLeft:-1e3},enter:{opacity:1,marginLeft:0},leave:{opacity:0,marginLeft:-1e3}},function(t){return t&&d&&function(t){return r.a.createElement(p.animated.div,{style:t},r.a.createElement("div",{className:"alternateList"},i.map(function(t){var a=t.teacher,n=a.code,c=a.full_name,i=a.id,o=t.subject.name;return r.a.createElement("div",{key:i,style:{width:"320px",marginRight:"20px"}},r.a.createElement(v,{name:c,subject:o,shortName:n,color:"#ffd7f2",onClickEnabled:!0,onBoxClicked:function(){return e.onBoxClicked(t)}}))})))}})),r.a.createElement(p.Transition,{native:!0,items:a,from:{opacity:0,marginLeft:-1e3},enter:{opacity:1,marginLeft:0},leave:{opacity:0,marginLeft:-1e3},config:{duration:1e3,interval:1e3}},function(t){return t&&function(t){return r.a.createElement(p.animated.div,{style:t},r.a.createElement("div",{className:"rightSidebar"},r.a.createElement(v,{name:C&&C.full_name,mobile:"NA",shortName:C&&C.code,color:"#ffd7d7",onClickEnabled:!1}),r.a.createElement("div",{className:"insightsMain"},r.a.createElement("div",{className:"insightTitle"},"Insights"),r.a.createElement("div",{className:"insightDetails"},s?r.a.createElement("div",{className:"insightDt"},"He had class in the previous hour"):"",l?r.a.createElement("div",{className:"insightDt"},"He has class in the next hour"):"",m>0?r.a.createElement("div",{className:"insightDt"},"He already have ",m," hour in this class"):"",u>0?r.a.createElement("div",{className:"insightDt"},"Already allocatted ",u," hour"):"")),r.a.createElement("div",{className:"footer"},r.a.createElement(T.a,{className:"cta cancel",onClick:function(){return e.setState({showSidebar:!1})}},"Cancel"),r.a.createElement(T.a,{className:"cta assign",onClick:e.assignAlternateTeacher},"Assign"))))}}))}}]),t}(n.Component),J=function(e){return r.a.createElement(f.d,null,r.a.createElement(f.b,{exact:!0,path:"/",render:function(){return r.a.createElement(f.a,{to:"/teachers"})}}),r.a.createElement(f.b,{exact:!0,path:"/teachers",component:O}),r.a.createElement(f.b,{exact:!0,path:"/teachers/:teacherId",component:z}),r.a.createElement(f.b,{exact:!0,path:"/about",component:x}),r.a.createElement(f.b,{exact:!0,path:"/users",component:w}))},R=a(24),U=Object(R.a)(),q=function(e){function t(){return Object(s.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"footerMain"},r.a.createElement("span",null,"Made With ",r.a.createElement("span",{className:"heart"})," Old Students of CMS"))}}]),t}(n.Component),K=(a(304),a(77)),G=(a(236),K.a.Item),V=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).onLoginSubmit=function(){a.props.form.validateFields(function(e,t){e?I.a.error("Please check the credentials"):fetch("".concat(E,"/api-auth/login/"),{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}).then(function(e){return e.json()}).then(function(e){console.log("data is ",e)}).catch(function(){return I.a.error("Please check the credentials")})})},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.form.getFieldDecorator,a=e.form;return r.a.createElement("div",{className:"loginContainer"},r.a.createElement("h2",null,"Login"),r.a.createElement(K.a,null,r.a.createElement(G,{label:"User Name"},t("userName",{rules:[{required:!0,message:"Please input your username!"}]})(r.a.createElement(b.a,{type:"text",className:"inputField"}))),r.a.createElement(G,{label:"Password"},t("password",{rules:[{required:!0,message:"Please input your Password!"}]})(r.a.createElement(b.a,{type:"password",className:"inputField"}))),r.a.createElement("div",null,r.a.createElement(T.a,{type:"primary",className:"cta",onClick:this.onLoginSubmit},"Log in"),r.a.createElement(T.a,{className:"cta cancel",onClick:function(){return a.resetFields()}},"Cancel"))))}}]),t}(n.Component),$=(K.a.create({name:"Login"})(V),a(301),h.a.Content),Q=function(e){function t(){return Object(s.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"app-container"},r.a.createElement(f.c,{history:U},r.a.createElement(h.a,null,r.a.createElement(r.a.Fragment,null,r.a.createElement($,null,r.a.createElement(J,null))),r.a.createElement(q,null))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(o.a,null,r.a.createElement(Q,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[147,1,2]]]);
//# sourceMappingURL=main.5a2037d1.chunk.js.map